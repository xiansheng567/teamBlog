<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../css/article/article.css">
    <title>Queue</title>
</head>
<body>
    <div class="container">
        <h1>Queue</h1>
        <div class="header-tag">
            <div class="date">ğŸ“… 2023/8/11</div>
            <div class="bookmark">ğŸ”– OI</div>
            <div class="tags">
                <span class="tag">C/C++</span>
                <span class="tag tag-secondary">C++20</span>
                <span class="tag tag-secondary">æ•°æ®ç»“æ„</span>
            </div>
        </div>
        <h2>1. é¢˜è§£</h2>
        <p>æˆ‘ä»¬å¯ä»¥ç”¨ <code>list</code> æ¨¡æ‹Ÿé˜Ÿåˆ—ï¼Œåœ¨æ›´æ–°é˜Ÿåˆ—çš„åŒæ—¶ç»´æŠ¤ä¸€ä¸ª <code>unordered_map</code> è®°å½•å…ƒç´ å‡ºç°çš„ä½ç½®ã€‚</p>
        <p>ä¸ºäº†æ“ä½œï¼Œæˆ‘ä»¬å®šä¹‰ A1 è¡¨ç¤ºæ’é˜Ÿåˆ—ï¼ŒA2 è¡¨ç¤ºæ¸¸ç©é˜Ÿåˆ—ã€‚</p>
        <p>å¯¹äºæ“ä½œ <code>start</code>ï¼Œå°† A2 çš„å…ƒç´ æ”¾å…¥ A1 çš„å°¾éƒ¨ï¼Œç„¶åå°† A1 é˜Ÿå¤´çš„å…ƒç´ æ”¾å…¥ A2ã€‚å¦‚æœ A1 ä¸ºå¤´åˆ™è¾“å‡º <code>Error</code>ã€‚</p>

        <pre>
            while (!A2.empty()) {
                string x = A2.front();
                A2.pop_front();
                S2.erase(x);
                A1.push_back(x);
                S1[--A1.end()];
            }

            if (A1.empty()) {
                cout << "Error\n";
                continue;
            }

            int cnt = 0;
            while (!A1.empty() && cnt < 2) {
                string x = A1.front();
                A1.pop_front();
                S2.erase(x);
                A2.push_back(x);
                S2[x] = ++cnt;
                cout << x << ' ';
            }
            cout << '\n';
            </pre>
            
            <p>å¯¹äºæ“ä½œ arriveï¼Œå¦‚æœ x åœ¨ A1 æˆ– A2 ä¸­åˆ™è¾“å‡º Errorï¼Œå¦åˆ™å°† x æ”¾åˆ° A1 çš„é˜Ÿå°¾ï¼Œå¹¶è¾“å‡º OKã€‚</p>
            <p>å¯¹äºæ“ä½œ <code>arrive</code>ï¼Œå¦‚æœ <code>x</code> åœ¨ S1 æˆ– S2 ä¸­åˆ™è¾“å‡º <code>Error</code>ï¼Œå¦åˆ™å°† <code>x</code> æ”¾åˆ° A1 çš„é˜Ÿå°¾ï¼Œå¹¶è¾“å‡º <code>OK</code>ã€‚</p>

                <pre>
            if (S1.contains(x) || S2.contains(x)) {
                cout << "Error\n";
                continue;
            }
            A1.push_back(x);
            S1[x] = --A1.end();
            cout << "OK\n";
                </pre>

                <p>å¯¹äºæ“ä½œ <code>leave</code>ï¼Œå¦‚æœ <code>x</code> ä¸åœ¨ A1 ä¸­åˆ™è¾“å‡º <code>Error</code>ï¼Œå¦åˆ™æ ¹æ®è®°å½•çš„ä½ç½®å°† <code>x</code> åœ¨ A1 åˆ é™¤ï¼Œå¹¶è¾“å‡º <code>OK</code>ã€‚</p>

                <pre>
            if (!S1.contains(x)) {
                cout << "Error\n";
                continue;
            }
            A1.erase(S1[x]);
            S1.erase(x);
            cout << "OK\n";
                </pre>
                <h2>2. ä»£ç </h2>

                <pre>
            #include iostream
            #include list
            #include unordered_map
            using namespace std;

            int main() {
                ios::sync_with_stdio(false);
                cin.tie(nullptr);
                
                int n;
                string op;
                list string A1, A2;
                unordered_map string, list string ::iterator> S1, S2;

                cin >> n;
                while (n--) {
                    cin >> op;
                    if (op == "start") {
                        while (!A2.empty()) {
                            string x = A2.front();
                            A2.pop_front();
                            S2.erase(x);
                            A1.push_back(x);
                            S1[x] = --A1.end();
                        }

                        if (A1.empty()) {
                            cout << "Error\n";
                            continue;
                        }

                        int cnt = 0;
                        while (!A1.empty() && cnt < 2) {
                            string x = A1.front();
                            A1.pop_front();
                            S2.erase(x);
                            A2.push_back(x);
                            S2[x] = ++cnt;
                            cout << x << ' ';
                        }
                        cout << '\n';
                    }
                }
                </pre>
    </div>
</body>
</html>